{% extends 'ADMIN/commen.html' %}
{% load static %}
{% block content %}

<div class="container mt-3">

  {% if messages %}
    {% for m in messages %}
      <div class="alert alert-info">{{ m }}</div>
    {% endfor %}
  {% endif %}

  <table class="table table-bordered mt-3">
      <thead class="table-dark">
          <tr>
              <th>#</th>
              <th>Recipient</th>
              <th>Doctor</th>
              <th>Subject</th>
              <th>Message</th>
              <th>Rating</th>
              <th>Posted On</th>
          </tr>
      </thead>

      <tbody>
          {% for fb in feedbacks %}
          <tr>
              <td>{{ forloop.counter }}</td>

              <!-- Recipient -->
              <td>
                  {{ fb.recipient.name }}<br>
                  <small>{{ fb.recipient.email }}</small>
              </td>

              <!-- Doctor -->
              <td>
                  {% if fb.appointment %}
                      Dr. {{ fb.appointment.slot.doctor.name }}<br>
                      <small>Date: {{ fb.appointment.slot.date }}</small>
                  {% else %}
                      <span class="text-muted">No appointment</span>
                  {% endif %}
              </td>

              <td>{{ fb.subject }}</td>

              <td>{{ fb.message|linebreaksbr }}</td>

              <td>{{ fb.rating }}/5</td>

              <td>{{ fb.created_at|date:"Y-m-d H:i" }}</td>

          </tr>
          {% empty %}
          <tr>
              <td colspan="7" class="text-center">No feedback available.</td>
          </tr>
          {% endfor %}
      </tbody>
  </table>

</div>

{% endblock %}
